<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Web AR Platform</title>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    <style>
        #buttons {
            position: absolute;
            top: 10px;
            left: 10px;
            z-index: 100;
        }
        .ar-button {
            padding: 10px 20px;
            margin: 5px;
            background-color: #fff;
            border: 1px solid #000;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div id="buttons"></div>
    <a-scene embedded arjs>
        <!-- Assets and scene objects will be injected here -->
    </a-scene>
    <script>
        // Load scene configuration from server
        fetch('/scenes/scene1')
            .then(response => response.json())
            .then(config => {
                const scene = document.querySelector('a-scene');
                
                // Add objects to the scene
                config.objects.forEach(obj => {
                    let entity = document.createElement('a-entity');
                    if (obj.type === 'image-target') {
                        entity.setAttribute('artoolkit', 'sourceType: image; sourceUrl: ' + obj.src);
                    } else if (obj.type === 'surface') {
                        entity.setAttribute('gltf-model', obj.model);
                        entity.setAttribute('position', obj.position);
                        entity.setAttribute('scale', obj.scale);
                    }
                    scene.appendChild(entity);
                });
                
                // Add buttons to the UI
                const buttonsDiv = document.getElementById('buttons');
                config.buttons.forEach(button => {
                    let btn = document.createElement('div');
                    btn.className = 'ar-button';
                    btn.textContent = button.label;
                    btn.addEventListener('click', () => {
                        if (button.action === 'startAnimation') {
                            startAnimation();
                        }
                    });
                    buttonsDiv.appendChild(btn);
                });
            });

        // Example function to start an animation
        function startAnimation() {
            let model = document.querySelector('[gltf-model]');
            model.setAttribute('animation', {
                property: 'rotation',
                to: '0 360 0',
                loop: true,
                dur: 2000
            });
        }
    </script>
</body>
</html>
